<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>لوحة تحكم مدير المتجر</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background: #f0f2f5; margin: 0; padding: 20px; }
        .admin-container { max-width: 900px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; border-bottom: 2px solid #c5a059; padding-bottom: 10px; }
        .form-group { display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 10px; margin-bottom: 20px; background: #f9f9f9; padding: 15px; border-radius: 10px; }
        input { padding: 10px; border: 1px solid #ddd; border-radius: 8px; }
        .btn-add { background: #27ae60; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; border-bottom: 1px solid #eee; text-align: right; }
        .btn-delete { background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
        .status-badge { padding: 5px 10px; border-radius: 20px; font-size: 12px; background: #e1f5fe; color: #0288d1; }
    </style>
</head>
<body>

<div class="admin-container">
    <h1>لوحة إدارة المنتجات ⚙️</h1>
    
    <h3>إضافة منتج جديد</h3>
    <div class="form-group">
        <input type="text" id="p-name" placeholder="اسم المنتج">
        <input type="number" step="0.001" id="p-price" placeholder="السعر (ر.ع)">
        <input type="text" id="p-img" placeholder="رابط صورة المنتج">
        <button class="btn-add" onclick="addNewProduct()">إضافة للمتجر +</button>
    </div>

    <h3>المنتجات الحالية</h3>
    <table>
        <thead>
            <tr>
                <th>الصورة</th>
                <th>الاسم</th>
                <th>السعر</th>
                <th>الإجراء</th>
            </tr>
        </thead>
        <tbody id="admin-product-list">
            </tbody>
    </table>
</div>

<script>
    // هذه البيانات ستُحفظ مستقبلاً في Firebase
    let myProducts = JSON.parse(localStorage.getItem('store_products')) || [
        { id: 1, name: "مجموعة العناية بالشعر", price: 25.500, img: "https://via.placeholder.com/50" }
    ];

    function renderAdminTable() {
        const tbody = document.getElementById('admin-product-list');
        tbody.innerHTML = myProducts.map(p => `
            <tr>
                <td><img src="${p.img}" width="40" style="border-radius:5px"></td>
                <td>${p.name}</td>
                <td>${p.price.toFixed(3)} ر.ع</td>
                <td><button class="btn-delete" onclick="deleteProduct(${p.id})">حذف</button></td>
            </tr>
        `).join('');
        
        // تحديث البيانات في "قاعدة البيانات المحلية" مؤقتاً
        localStorage.setItem('store_products', JSON.stringify(myProducts));
    }

    function addNewProduct() {
        const name = document.getElementById('p-name').value;
        const price = parseFloat(document.getElementById('p-price').value);
        const img = document.getElementById('p-img').value;

        if(name && price && img) {
            const newP = { id: Date.now(), name, price, img };
            myProducts.push(newP);
            renderAdminTable();
            // مسح الحقول بعد الإضافة
            document.getElementById('p-name').value = '';
            document.getElementById('p-price').value = '';
            document.getElementById('p-img').value = '';
            alert("تمت إضافة المنتج بنجاح!");
        } else {
            alert("يرجى ملء جميع الحقول");
        }
    }

    function deleteProduct(id) {
        if(confirm("هل أنت متأكد من حذف هذا المنتج؟")) {
            myProducts = myProducts.filter(p => p.id !== id);
            renderAdminTable();
        }
    }

    renderAdminTable();
</script>
</body>
</html>
